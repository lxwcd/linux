
# NFS
 NFS 服务器在客户端之后启动，客户端不会自动挂载
```bash
/home/joe       pc001(rw,all_squash,anonuid=150,anongid=100)

```

两个 web 服务：10.0.0.203 和 10.0.0.204 :
安装web 服务：
[How To Install the Apache Web Server on Ubuntu 22.04](https://www.digitalocean.com/community/tutorials/how-to-install-the-apache-web-server-on-ubuntu-22-04)

```bash
[root@Web2 data]$ apt install -y apache2

[root@Web2 data]$ ufw status
Status: inactive

```

```bash
[root@Web2 html]$ systemctl status apache2.service
● apache2.service - The Apache HTTP Server
     Loaded: loaded (/lib/systemd/system/apache2.service; enabled; vendor preset: enabled)
     Active: active (running) since Sun 2023-05-14 15:06:32 CST; 11min ago
       Docs: https://httpd.apache.org/docs/2.4/
    Process: 54259 ExecStart=/usr/sbin/apachectl start (code=exited, status=0/SUCCESS)
   Main PID: 54263 (apache2)
      Tasks: 7 (limit: 2193)
     Memory: 10.9M
        CPU: 153ms
     CGroup: /system.slice/apache2.service
             ├─54263 /usr/sbin/apache2 -k start
             ├─54267 /usr/sbin/apache2 -k start
             ├─54268 /usr/sbin/apache2 -k start
             ├─54269 /usr/sbin/apache2 -k start
             ├─54270 /usr/sbin/apache2 -k start
             ├─54271 /usr/sbin/apache2 -k start
             └─54747 /usr/sbin/apache2 -k start

May 14 15:06:31 Web2 systemd[1]: Starting The Apache HTTP Server...
May 14 15:06:32 Web2 apachectl[54262]: AH00558: apache2: Could not reliably determine the server's fully qualifi>
May 14 15:06:32 Web2 systemd[1]: Started The Apache HTTP Server.
[root@Web2 html]$
```
```bash
[root@Web2 html]$ ps aux | grep apache2
www-data   46083  0.0  0.0   3736   160 ?        Ss   15:04   0:00 /usr/bin/htcacheclean -d 120 -p /var/cache/apache2/mod_cache_disk -l 300M -n
root       54263  0.0  0.9 206360 19736 ?        Ss   15:06   0:00 /usr/sbin/apache2 -k start
www-data   54267  0.0  0.4 206852  8980 ?        S    15:06   0:00 /usr/sbin/apache2 -k start
www-data   54268  0.0  0.4 206868  8980 ?        S    15:06   0:00 /usr/sbin/apache2 -k start
www-data   54269  0.0  0.4 206852  8980 ?        S    15:06   0:00 /usr/sbin/apache2 -k start
www-data   54270  0.0  0.4 206852  8980 ?        S    15:06   0:00 /usr/sbin/apache2 -k start
www-data   54271  0.0  0.5 206916 10676 ?        S    15:06   0:00 /usr/sbin/apache2 -k start
www-data   54747  0.0  0.4 206852  8980 ?        S    15:09   0:00 /usr/sbin/apache2 -k start
root       57152  0.0  0.1   9564  2356 pts/1    S+   15:19   0:00 grep --color=auto apache2
```
web 服务 owner 为 www-data

```bash
[root@Web2 html]$ id www-data
uid=33(www-data) gid=33(www-data) groups=33(www-data)
[root@Web2 html]$ getent passwd 33
www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin
[root@Web2 html]$
[root@Web2 html]$ getent passwd lx
lx:x:1001:1001::/home/lx:/bin/bash
```


NFS 服务器 rocky8.6 10.0.0.83 
rocky 上已经有 tape（33）组，暂时将其该名为 www-data，该组没有用户使用
```bash
[root@NFS html]$ getent group 33
tape:x:33:
[root@NFS html]$ vim /etc/group
[root@NFS html]$ man group
(reverse-i-search)`useradd': ^Ceradd -u 33 -g 33 -d /var/www -s /bin/nologin -r www-data
[root@NFS html]$ useradd -u 33 -g 33 -d /var/www -s /bin/nologin -r www-data^C
[root@NFS html]$ useradd -u 33 -g 33 -d /var/www -s /bin/nologin -r www-data
[root@NFS html]$ id 33
uid=33(www-data) gid=33(tape) groups=33(tape)
[root@NFS html]$ groupmod -n www-data tape
[root@NFS html]$ id 33
uid=33(www-data) gid=33(www-data) groups=33(www-data)
[root@NFS html]$
```

***********
LVS 10.0.0.202 ubuntu 22.04


router 
开启 ip_forward
```bash
[root@lvs netplan]$ vim /etc/sysctl.conf
[root@lvs netplan]$ sysctl -p
net.ipv4.ip_forward = 1
[root@lvs netplan]$ cat /proc/sys/net/ipv4/ip_forward
1
```

```bash
route add -net 192.168.10.0/24 gw 172.16.18.2 dev eth1
```

```bash
 This is a complex example which shows most available features:

              network:
                version: 2
                # if specified, can only realistically have that value, as networkd cannot
                # render wifi/3G.
                renderer: NetworkManager
                ethernets:
                  # opaque ID for physical interfaces, only referred to by other stanzas
                  id0:
                    match:
                      macaddress: 00:11:22:33:44:55
                    wakeonlan: true
                    dhcp4: true
                    addresses:
                      - 192.168.14.2/24
                      - 192.168.14.3/24
                      - "2001:1::1/64"
                    nameservers:
                      search: [foo.local, bar.local]
                      addresses: [8.8.8.8]
                    routes:
                      - to: default
                        via: 192.168.14.1
                      - to: default
                        via: "2001:1::2"
                      - to: 0.0.0.0/0
                        via: 11.0.0.1
                        table: 70
                        on-link: true
                        metric: 3
                    routing-policy:
                      - to: 10.0.0.0/8
                        from: 192.168.14.2/24
                        table: 70
                        priority: 100
                      - to: 20.0.0.0/8
                        from: 192.168.14.3/24
                        table: 70
                        priority: 50
                    # only networkd can render on-link routes and routing policies
                    renderer: networkd
                  lom:
                    match:
                      driver: ixgbe
                    # you are responsible for setting tight enough match rules
                    # that only match one device if you use set-name
                    set-name: lom1
                    dhcp6: true
                  switchports:
                    # all cards on second PCI bus unconfigured by
                    # themselves, will be added to br0 below
                    match:
                      name: enp2*
                    mtu: 1280
 wifis:
                  all-wlans:
                    # useful on a system where you know there is
                    # only ever going to be one device
                    match: {}
                    access-points:
                      "Joe's home":
                        # mode defaults to "infrastructure" (client)
                        password: "s3kr1t"
                  # this creates an AP on wlp1s0 using hostapd
                  # no match rules, thus the ID is the interface name
                  wlp1s0:
                    access-points:
                      "guest":
                         mode: ap
                         # no WPA config implies default of open
                bridges:
                  # the key name is the name for virtual (created) interfaces
                  # no match: and set-name: allowed
                  br0:
                    # IDs of the components; switchports expands into multiple interfaces
                    interfaces: [wlp1s0, switchports]
                    dhcp4: true

```